<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
        integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="../../img/MicrosoftTeams-image-removebg-preview.png" tyle="image/ x-icon">
    <link rel="stylesheet" href="../../CSS/Cadastro/style.css">
    <link rel="stylesheet" href="../../CSS/Cadastro/index.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.js"></script>
   
     <script src="js/script.js"></script>
    <script src="js/Cadastro/script.js"></script>

    


    <title>Cadastro</title>
</head>

<body>
    <%
    let msgErro = {nome:"", senha:"",user:"",email:"", senha:""}
    let avisoErro = {nome:"", senha:"",user:"",email:"", senha:""}
    let valores = {nome:"", email:"", senha:"", user:"", cep: "" } 
    if(listaErros){
    }
    if(listaErros && listaErros.errors){    
        listaErros.errors.forEach(function(itemErro){
            if(itemErro.path == "nome"){
                avisoErro.nome = "erro";
                msgErro.nome += `* ${itemErro.msg} <br>`;
            }
            if(itemErro.path == "senha"){
                avisoErro.senha = "erro";
                msgErro.senha = `* ${itemErro.msg} <br>`;
            }
            if(itemErro.path == "user"){
                avisoErro.user = "erro";
                msgErro.user = `* ${itemErro.msg} <br>`;

            if(itemErro.path == "email"){
                avisoErro.email = "erro";
                msgErro.email= `* ${itemErro.msg} <br>`;
            }
        }

       })
        if(msgErro != ""){
            %>
            <script>
                    let msgErro ="<%= msgErro %>"
                    notify("Erro(s) no preenchimento","Verifique o(s) campo(s) <br>  " + msgErro.replace(/&lt;/g,"<").replace(/&gt;/g,">"), "error", "center", 5000)                        
                </script>
            <%
            }
    }
    if (dadosNotificacao) { %>
        <script>
                notify("<%= dadosNotificacao.titulo%>","<%= dadosNotificacao.mensagem%>", "<%= dadosNotificacao.tipo%>", "center")
                if("<%= dadosNotificacao.tipo %>" == "success"){
                    setTimeout(function(){window.location="/sair"}, 3000)
                }                        
        </script>
    <% } %>
    %>
    <main>
        <section class="box-form">
            <form action="/Publicacao" id="form" method="post">
                <section class="form-content">
                    <h3 class="titulo">Olá seja bem vindo!</h3>
                    <p class="sub-titulo">Estamos muito animados em ter você aqui!</p>
                    <section class="figura-logo">
                        <article class="logo-container">
                            <a href="/">
                                <img src="../../img/LOGO2.png">
                            </a>
                        </article>
                    </section>
                    <br class="register-link">
                        Já tem uma conta?<a href="/login">Entre</a>
                        <br>Você é uma empresa?
                    <a href="/cadastro/cnpj">Cadastre-se</a></br>
                    </p>

                    <article class="form-input">
                        <label id="labelNome" for="nome">Nome completo <span>*</span> </label>
                        <input type="text" placeholder="Digite seu nome" value="<%= valores.nome %>"  class=" <%= avisoErro.nome %>" id="nome" name="nome"/>
                        <span> <%= msgErro.nome %> </span><br>
                        <small id="textNome"></small>
                    </article>

                    <article class="form-input">
                        <label id="labelEmail" for="email">Email <span>*</span> </label>
                        <input type="text" placeholder="Digite seu email" value="<%= valores.email %>"  class=" <%= avisoErro.email %>" id="email" name="email"/>
                        <span> <%= msgErro.email %> </span><br>
                        <small id="textNome"></small>
                    </article>

                    <article class="form-input">
                        <label id="labelNome" for="user">Nome de usuário <span>*</span> </label>
                        <input type="text" placeholder="Nome de usuário " value="<%= valores.user %>"  class=" <%= avisoErro.user %>" id="user" name="user"/>
                        <span> <%= msgErro.user %> </span><br>
                        <small id="textNome"></small>
                    </article>

                    <article class="form-input">
                        <label id="labelData" for="data">Data de nascimento <span>*</span> </label>
                        <input type="text" placeholder="__/__/____" id="data_nasc" maxlength="10" name="data_nasc">
                        <small id="textData"></small>
                    </article>

                    <article class="form-input">
                        <label id="labelCep" for="cep">Cep <span>*</span> </label>
                        <input type="text" placeholder="Cep" id="cep" maxlength="9" name="cep" value="<%= valores.cep %>" >
                        <small id="textCep"></small>
                    </article>
                    <section class="form-input">
                        <article class="input__wrapper">
                            <img alt="Eye Icon" title="Eye Icon" src="../../img/Login/eye-off.svg" class="input__icon">
                            <label id="labelSenha" for="senha">Senha <span>*</span></label>
                            <input type="password" placeholder="Senha" value="<%= valores.senha %>" id="senha" class="<%= avisoErro.senha %>" maxlength="30" name="senha">
                            <span><%= msgErro.senha %></span><br>
                            <small id="textPassword"></small>
                        </article>
                        <article class="input__wrapper">
                            <img alt="Eye Icon" title="Eye Icon" src="../../img/Login/eye-off.svg" class="input__icon">
                            <label id="Labelconfirmasenha" for="confirmasenha">Confirme a senha <span>*</span></label>
                            <input type="password" placeholder="Confirme sua senha" value="<%= valores.confirmasenha %>" id="confirmasenha" class="<%= avisoErro.confirmasenha %>" maxlength="30" name="confirmasenha">
                            <span><%= msgErro.confirmasenha %></span>
                            <small id="textconfirmesenha"></small>
                        </article>
                    </section>                    

                </section>

                <input type="submit" value="Entrar" id="Entrar">

                <article id='msgError'></article>
                <article id='msgSuccess'></article>
                <small id="textForm"></small>
            </form>
        </section>
    </form>
    </main>
    <footer></footer>
    <script src="../../js/Cadastro/senha.js"></script>
    <script src="../../js/Cadastro/validacao.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.7/inputmask.min.js"></script>

</body>

</html>